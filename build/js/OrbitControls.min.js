THREE.OrbitControls=function(a,b){function c(){return 2*Math.PI/60/60*J.autoRotateSpeed}function d(){return Math.pow(.95,J.zoomSpeed)}function e(a){R-=a}function f(a){Q-=a}function g(a){J.object instanceof THREE.PerspectiveCamera?S/=a:J.object instanceof THREE.OrthographicCamera?(J.object.zoom=Math.max(J.minZoom,Math.min(J.maxZoom,J.object.zoom*a)),J.object.updateProjectionMatrix(),U=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),J.enableZoom=!1)}function h(a){J.object instanceof THREE.PerspectiveCamera?S*=a:J.object instanceof THREE.OrthographicCamera?(J.object.zoom=Math.max(J.minZoom,Math.min(J.maxZoom,J.object.zoom/a)),J.object.updateProjectionMatrix(),U=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),J.enableZoom=!1)}function i(a){V.set(a.clientX,a.clientY)}function j(a){_.set(a.clientX,a.clientY)}function k(a){Y.set(a.clientX,a.clientY)}function l(a){W.set(a.clientX,a.clientY),X.subVectors(W,V);var b=J.domElement===document?J.domElement.body:J.domElement;e(2*Math.PI*X.x/b.clientWidth*J.rotateSpeed),f(2*Math.PI*X.y/b.clientHeight*J.rotateSpeed),V.copy(W),J.update()}function m(a){aa.set(a.clientX,a.clientY),ba.subVectors(aa,_),ba.y>0?g(d()):ba.y<0&&h(d()),_.copy(aa),J.update()}function n(a){Z.set(a.clientX,a.clientY),$.subVectors(Z,Y),ea($.x,$.y),Y.copy(Z),J.update()}function o(a){}function p(a){var b=0;void 0!==a.wheelDelta?b=a.wheelDelta:void 0!==a.detail&&(b=-a.detail),b>0?h(d()):0>b&&g(d()),J.update()}function q(a){switch(a.keyCode){case J.keys.UP:ea(0,J.keyPanSpeed),J.update();break;case J.keys.BOTTOM:ea(0,-J.keyPanSpeed),J.update();break;case J.keys.LEFT:ea(J.keyPanSpeed,0),J.update();break;case J.keys.RIGHT:ea(-J.keyPanSpeed,0),J.update()}}function r(a){V.set(a.touches[0].pageX,a.touches[0].pageY)}function s(a){var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY,d=Math.sqrt(b*b+c*c);_.set(0,d)}function t(a){Y.set(a.touches[0].pageX,a.touches[0].pageY)}function u(a){W.set(a.touches[0].pageX,a.touches[0].pageY),X.subVectors(W,V);var b=J.domElement===document?J.domElement.body:J.domElement;e(2*Math.PI*X.x/b.clientWidth*J.rotateSpeed),f(2*Math.PI*X.y/b.clientHeight*J.rotateSpeed),V.copy(W),J.update()}function v(a){var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY,e=Math.sqrt(b*b+c*c);aa.set(0,e),ba.subVectors(aa,_),ba.y>0?h(d()):ba.y<0&&g(d()),_.copy(aa),J.update()}function w(a){Z.set(a.touches[0].pageX,a.touches[0].pageY),$.subVectors(Z,Y),ea($.x,$.y),Y.copy(Z),J.update()}function x(a){}function y(a){if(J.enabled!==!1){if(a.preventDefault(),a.button===J.mouseButtons.ORBIT){if(J.enableRotate===!1)return;i(a),O=N.ROTATE}else if(a.button===J.mouseButtons.ZOOM){if(J.enableZoom===!1)return;j(a),O=N.DOLLY}else if(a.button===J.mouseButtons.PAN){if(J.enablePan===!1)return;k(a),O=N.PAN}O!==N.NONE&&(document.addEventListener("mousemove",z,!1),document.addEventListener("mouseup",A,!1),document.addEventListener("mouseout",A,!1),J.dispatchEvent(L))}}function z(a){if(J.enabled!==!1)if(a.preventDefault(),O===N.ROTATE){if(J.enableRotate===!1)return;l(a)}else if(O===N.DOLLY){if(J.enableZoom===!1)return;m(a)}else if(O===N.PAN){if(J.enablePan===!1)return;n(a)}}function A(a){J.enabled!==!1&&(o(a),document.removeEventListener("mousemove",z,!1),document.removeEventListener("mouseup",A,!1),document.removeEventListener("mouseout",A,!1),J.dispatchEvent(M),O=N.NONE)}function B(a){J.enabled!==!1&&J.enableZoom!==!1&&O===N.NONE&&(a.preventDefault(),a.stopPropagation(),p(a),J.dispatchEvent(L),J.dispatchEvent(M))}function C(a){J.enabled!==!1&&J.enableKeys!==!1&&J.enablePan!==!1&&q(a)}function D(a){if(J.enabled!==!1){switch(a.touches.length){case 1:if(J.enableRotate===!1)return;r(a),O=N.TOUCH_ROTATE;break;case 2:if(J.enableZoom===!1)return;s(a),O=N.TOUCH_DOLLY;break;case 3:if(J.enablePan===!1)return;t(a),O=N.TOUCH_PAN;break;default:O=N.NONE}O!==N.NONE&&J.dispatchEvent(L)}}function E(a){if(J.enabled!==!1)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:if(J.enableRotate===!1)return;if(O!==N.TOUCH_ROTATE)return;u(a);break;case 2:if(J.enableZoom===!1)return;if(O!==N.TOUCH_DOLLY)return;v(a);break;case 3:if(J.enablePan===!1)return;if(O!==N.TOUCH_PAN)return;w(a);break;default:O=N.NONE}}function F(a){J.enabled!==!1&&(x(a),J.dispatchEvent(M),O=N.NONE)}function G(a){a.preventDefault()}this.object=a,this.domElement=void 0!==b?b:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return I},this.getAzimuthalAngle=function(){return H},this.reset=function(){J.target.copy(J.target0),J.object.position.copy(J.position0),J.object.zoom=J.zoom0,J.object.updateProjectionMatrix(),J.dispatchEvent(K),J.update(),O=N.NONE},this.update=function(){var b=new THREE.Vector3,d=(new THREE.Quaternion).setFromUnitVectors(a.up,new THREE.Vector3(0,1,0)),f=d.clone().inverse(),g=new THREE.Vector3,h=new THREE.Quaternion;return function(){var a=J.object.position;b.copy(a).sub(J.target),b.applyQuaternion(d),H=Math.atan2(b.x,b.z),I=Math.atan2(Math.sqrt(b.x*b.x+b.z*b.z),b.y),J.autoRotate&&O===N.NONE&&e(c()),H+=R,I+=Q,H=Math.max(J.minAzimuthAngle,Math.min(J.maxAzimuthAngle,H)),I=Math.max(J.minPolarAngle,Math.min(J.maxPolarAngle,I)),I=Math.max(P,Math.min(Math.PI-P,I));var i=b.length()*S;return i=Math.max(J.minDistance,Math.min(J.maxDistance,i)),J.target.add(T),b.x=i*Math.sin(I)*Math.sin(H),b.y=i*Math.cos(I),b.z=i*Math.sin(I)*Math.cos(H),b.applyQuaternion(f),a.copy(J.target).add(b),J.object.lookAt(J.target),J.enableDamping===!0?(R*=1-J.dampingFactor,Q*=1-J.dampingFactor):(R=0,Q=0),S=1,T.set(0,0,0),U||g.distanceToSquared(J.object.position)>P||8*(1-h.dot(J.object.quaternion))>P?(J.dispatchEvent(K),g.copy(J.object.position),h.copy(J.object.quaternion),U=!1,!0):!1}}(),this.dispose=function(){J.domElement.removeEventListener("contextmenu",G,!1),J.domElement.removeEventListener("mousedown",y,!1),J.domElement.removeEventListener("mousewheel",B,!1),J.domElement.removeEventListener("MozMousePixelScroll",B,!1),J.domElement.removeEventListener("touchstart",D,!1),J.domElement.removeEventListener("touchend",F,!1),J.domElement.removeEventListener("touchmove",E,!1),document.removeEventListener("mousemove",z,!1),document.removeEventListener("mouseup",A,!1),document.removeEventListener("mouseout",A,!1),window.removeEventListener("keydown",C,!1)};var H,I,J=this,K={type:"change"},L={type:"start"},M={type:"end"},N={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},O=N.NONE,P=1e-6,Q=0,R=0,S=1,T=new THREE.Vector3,U=!1,V=new THREE.Vector2,W=new THREE.Vector2,X=new THREE.Vector2,Y=new THREE.Vector2,Z=new THREE.Vector2,$=new THREE.Vector2,_=new THREE.Vector2,aa=new THREE.Vector2,ba=new THREE.Vector2,ca=function(){var a=new THREE.Vector3;return function(b,c){var d=c.elements;a.set(d[0],d[1],d[2]),a.multiplyScalar(-b),T.add(a)}}(),da=function(){var a=new THREE.Vector3;return function(b,c){var d=c.elements;a.set(d[4],d[5],d[6]),a.multiplyScalar(b),T.add(a)}}(),ea=function(){var a=new THREE.Vector3;return function(b,c){var d=J.domElement===document?J.domElement.body:J.domElement;if(J.object instanceof THREE.PerspectiveCamera){var e=J.object.position;a.copy(e).sub(J.target);var f=a.length();f*=Math.tan(J.object.fov/2*Math.PI/180),ca(2*b*f/d.clientHeight,J.object.matrix),da(2*c*f/d.clientHeight,J.object.matrix)}else J.object instanceof THREE.OrthographicCamera?(ca(b*(J.object.right-J.object.left)/d.clientWidth,J.object.matrix),da(c*(J.object.top-J.object.bottom)/d.clientHeight,J.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),J.enablePan=!1)}}();J.domElement.addEventListener("contextmenu",G,!1),J.domElement.addEventListener("mousedown",y,!1),J.domElement.addEventListener("mousewheel",B,!1),J.domElement.addEventListener("MozMousePixelScroll",B,!1),J.domElement.addEventListener("touchstart",D,!1),J.domElement.addEventListener("touchend",F,!1),J.domElement.addEventListener("touchmove",E,!1),window.addEventListener("keydown",C,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(a){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!a}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(a){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!a}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(a){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!a}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(a){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!a}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.constraint.enableDamping},set:function(a){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.constraint.enableDamping=!a}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor},set:function(a){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor=a}}});