var makeVideoPlayableInline=function(){"use strict";function a(a,b,c,d){function e(c){f=b(e,d),a(c-(g||c)),g=c}var f,g;return{start:function(){f||e(0)},stop:function(){c(f),f=null,g=0}}}function b(b){return a(b,requestAnimationFrame,cancelAnimationFrame)}function c(a,b,c,d){function e(b){Boolean(a[c])===Boolean(d)&&b.stopImmediatePropagation(),delete a[c]}return a.addEventListener(b,e,!1),e}function d(a,b,c,d){function e(){return c[b]}function f(a){c[b]=a}d&&f(a[b]),Object.defineProperty(a,b,{get:e,set:f})}function e(a,b,c){c.addEventListener(b,function(){return a.dispatchEvent(new Event(b))})}function f(a,b){Promise.resolve().then(function(){a.dispatchEvent(new Event(b))})}function g(a){var b=new Audio;return e(a,"play",b),e(a,"playing",b),e(a,"pause",b),b.crossOrigin=a.crossOrigin,b.src=a.src||a.currentSrc||"data:",b}function h(a,b,c){(p||0)+200<Date.now()&&(a[t]=!0,p=Date.now()),c||(a.currentTime=b),w[++x%3]=100*b|0}function i(a){return a.driver.currentTime>=a.video.duration}function j(a){var b=this;b.video.readyState>=b.video.HAVE_FUTURE_DATA?(b.hasAudio||(b.driver.currentTime=b.video.currentTime+a*b.video.playbackRate/1e3,b.video.loop&&i(b)&&(b.driver.currentTime=0)),h(b.video,b.driver.currentTime)):b.video.networkState!==b.video.NETWORK_IDLE||b.video.buffered.length||b.video.load(),b.video.ended&&(delete b.video[t],b.video.pause(!0))}function k(){var a=this,b=a[s];return a.webkitDisplayingFullscreen?void a[u]():("data:"!==b.driver.src&&b.driver.src!==a.src&&(h(a,0,!0),b.driver.src=a.src),void(a.paused&&(b.paused=!1,a.buffered.length||a.load(),b.driver.play(),b.updater.start(),b.hasAudio||(f(a,"play"),b.video.readyState>=b.video.HAVE_ENOUGH_DATA&&f(a,"playing")))))}function l(a){var b=this,c=b[s];c.driver.pause(),c.updater.stop(),b.webkitDisplayingFullscreen&&b[v](),c.paused&&!a||(c.paused=!0,c.hasAudio||f(b,"pause"),b.ended&&(b[t]=!0,f(b,"ended")))}function m(a,c){var d=a[s]={};d.paused=!0,d.hasAudio=c,d.video=a,d.updater=b(j.bind(d)),c?d.driver=g(a):(a.addEventListener("canplay",function(){a.paused||f(a,"playing")}),d.driver={src:a.src||a.currentSrc||"data:",muted:!0,paused:!0,pause:function(){d.driver.paused=!0},play:function(){d.driver.paused=!1,i(d)&&h(a,0)},get ended(){return i(d)}}),a.addEventListener("emptied",function(){var b=!d.driver.src||"data:"===d.driver.src;d.driver.src&&d.driver.src!==a.src&&(h(a,0,!0),d.driver.src=a.src,b?d.driver.play():d.updater.stop())},!1),a.addEventListener("webkitbeginfullscreen",function(){a.paused?c&&!d.driver.buffered.length&&d.driver.load():(a.pause(),a[u]())}),c&&(a.addEventListener("webkitendfullscreen",function(){d.driver.currentTime=a.currentTime}),a.addEventListener("seeking",function(){w.indexOf(100*a.currentTime|0)<0&&(d.driver.currentTime=a.currentTime)}))}function n(a){var b=a[s];a[u]=a.play,a[v]=a.pause,a.play=k,a.pause=l,d(a,"paused",b.driver),d(a,"muted",b.driver,!0),d(a,"playbackRate",b.driver,!0),d(a,"ended",b.driver),d(a,"loop",b.driver,!0),c(a,"seeking"),c(a,"seeked"),c(a,"timeupdate",t,!1),c(a,"ended",t,!1)}function o(a,b,c){void 0===b&&(b=!0),void 0===c&&(c=!0),c&&!r||a[s]||(m(a,b),n(a),a.classList.add("IIV"),!b&&a.autoplay&&a.play(),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments"))}var p,q="undefined"==typeof Symbol?function(a){return"@"+(a||"@")+Math.random()}:Symbol,r=/iPhone|iPod/i.test(navigator.userAgent)&&!matchMedia("(-webkit-video-playable-inline)").matches,s=q(),t=q(),u=q("nativeplay"),v=q("nativepause"),w=[],x=0;return o.isWhitelisted=r,o}();